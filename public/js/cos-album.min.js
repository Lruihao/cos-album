Cosalbum=function(){var t=function(b){let c=r(b,b.xmlLink),a=document.createElement("div"),e=document.querySelector(b.prependTo||"body");a.className="cos-album";for(let f=0;f<c.length;f++){c[f]=c[f].reverse();c[f].unshift(c[f].pop());let l=document.createElement("div");var d=document.createElement("div"),g=document.createElement("div"),h=c[f][0].url.slice(0,-1);g.innerHTML=h;g.className="title";d.appendChild(g);d.className="cover";d.style.cssText=`background: url(${b.xmlLink}/${h}/\u5c01\u9762.jpg);`;
l.appendChild(d);l.className="photoBox";a.appendChild(l);for(d=1;d<c[f].length&&d<=b.viewNum;d++){g=document.createElement("div");let a=document.createElement("span"),e=document.createElement("span"),k;g.className="photo";let m=c[f][d].url.split(".");if(b.imgType.includes(m[1]))k=document.createElement("img"),k.setAttribute("alt",c[f][d].url);else if(b.videoType.includes(m[1]))k=document.createElement("video"),k.setAttribute("controls","controls");else continue;k.setAttribute("src",`${b.xmlLink}/${h}/${c[f][d].url}`);
b.copyUrl&&n(k,`${b.copyUrl}/${h}/${c[f][d].url}`,b);a.innerHTML=a.title=m[0];e.innerHTML=p(c[f][d].date);e.title=c[f][d].date;g.appendChild(k);g.appendChild(a);g.appendChild(e);l.appendChild(g)}e.insertBefore(a,e.firstChild);c[f].length>b.viewNum&&(h=document.createElement("div"),d=document.createElement("button"),h.className="more",d.className="btn-more",d.innerHTML="\u52a0\u8f09\u66f4\u591a",d.addEventListener("click",function(){{var a=c[f];let d=this.parentNode.parentNode,e=d.childNodes.length-
1,h=a[0].url.slice(0,-1);d.removeChild(this.parentNode);for(let c=e;c<a.length&&c<e+b.viewNum;c++){let e=a[c].url,f=document.createElement("div"),g=document.createElement("span"),l=document.createElement("span"),k;f.className="photo";let m=e.split(".");if(b.imgType.includes(m[1]))k=document.createElement("img"),k.setAttribute("alt",e);else if(b.videoType.includes(m[1]))k=document.createElement("video"),k.setAttribute("controls","controls");else continue;k.setAttribute("src",`${b.xmlLink}/${h}/${e}`);
b.copyUrl&&n(k,`${b.copyUrl}/${h}/${e}`,b);g.innerHTML=g.title=m[0];l.innerHTML=p(a[c].date);l.title=a[c].date;f.appendChild(k);f.appendChild(g);f.appendChild(l);d.appendChild(f)}a.length>e+b.viewNum&&d.appendChild(this.parentNode)}}),h.appendChild(d),l.appendChild(h))}},r=function(b,c){var a={};try{a=new ActiveXObject("Microsoft.XMLDOM")}catch(g){try{a=document.implementation.createDocument("","",null)}catch(h){console.error(h.message)}}try{a.async=!1,a.load(c)}catch(g){try{var e=new XMLHttpRequest;
e.open("GET",c,!1);e.send(null);a=e.responseXML.documentElement}catch(h){console.error(h.message)}}c=a;b.xmlDoc=c;c=b.xmlDoc.querySelectorAll("Key");b=b.xmlDoc.querySelectorAll("LastModified");a=-1;e=0;let d=[];for(let g=0;g<c.length;g++){let h=c[g].innerHTML,f=b[g].innerHTML.slice(0,19).replace(/T/g," "),l=h.indexOf("/");-1!==l&&(l===h.length-1?(d[++a]=[],d[a][0]={url:h,date:f},e=1):d[a][e++]={url:h.slice(l+1),date:f})}return d},n=function(b,c,a){b.addEventListener("dblclick",function(){let b=document.querySelector(".copy-node");
b.value=c;a.TimeoutShow&&clearTimeout(a.TimeoutShow);b.classList.add("show");b.select();try{document.execCommand("copy")}catch(d){console.error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u64cd\u4f5c\uff01")}console.log("\u590d\u5236\u6210\u529f\uff01");a.TimeoutShow=setTimeout(()=>{b.classList.remove("show")},3E3)})},p=b=>{if(b){var c=new Date(b.replace(/-/g,"/"));c=Math.floor((new Date-c)/1E3-28800);var a=Math.floor(c/2592E3);if(4<=a)return b.slice(0,-3);if(1<=a)return a+" \u6708\u524d";
a=Math.floor(c/604800);if(1<=a)return a+" \u9031\u524d";a=Math.floor(c/86400);if(1<=a)return a+" \u5929\u524d";a=Math.floor(c/3600);if(1<=a)return a+" \u5c0f\u6642\u524d";a=Math.floor(c/60);return 1<=a?a+" \u5206\u9418\u524d":"\u525b\u525b"}},q=b=>{if(typeof b!==String&&!Array.isArray(b))return null;if(!Array.isArray(b))return b.split(",")};return function(b){this.version="1.1.6";this.option=b||{};this.xmlLink=this.option.xmlLink||"";this.prependTo=this.option.prependTo||"body";this.viewNum=this.option.viewNum||
4;this.copyUrl=this.option.copyUrl||"";this.imgType=q(this.option.imgType)||["jpg","jpeg","png","gif","svg"];this.videoType=q(this.option.videoType)||["mp4","mp3","avi","mov","qt"];this.copyUrl&&(b=document.createElement("input"),b.className="copy-node",b.setAttribute("readonly","readonly"),document.body.appendChild(b));t(this);{b=this.version;let c=document.querySelector(".cos-album"),a=document.createElement("div"),e=document.createElement("a");e.href="https://github.com/Lruihao/cos-album";e.target=
"_blank";e.innerHTML="cos-album";a.className="capower";a.innerHTML="Powered By ";a.appendChild(e);a.innerHTML+=`<br/>v${b}`;c.appendChild(a)}}}();