Cosalbum=function(){var q=function(b){let c=p(b,b.xmlLink),a=document.createElement("div"),f=document.querySelector(b.prependTo||"body");a.className="cos-album";for(let g=0;g<c.length;g++){let k=document.createElement("div");var d=document.createElement("div"),e=document.createElement("div"),h=c[g][0].url.slice(0,-1);e.innerHTML=h;e.className="title";d.appendChild(e);d.className="cover";d.style.cssText=`background: url(${b.xmlLink}/${h}/\u5c01\u9762.jpg);`;k.appendChild(d);k.className="photoBox";
a.appendChild(k);for(d=1;d<c[g].length&&d<b.viewNum+1;d++){e=document.createElement("div");let a=document.createElement("img"),f=document.createElement("span"),l=document.createElement("span");e.className="photo";a.setAttribute("src",`${b.xmlLink}/${h}/${c[g][d].url}`);a.setAttribute("alt",c[g][d].url);b.imgUrl&&m(a,`${b.imgUrl}/${h}/${c[g][d].url}`,b);f.innerHTML=c[g][d].url.slice(0,-4);l.innerHTML=n(c[g][d].date);l.title=c[g][d].date;e.appendChild(a);e.appendChild(f);e.appendChild(l);k.appendChild(e)}f.insertBefore(a,
f.firstChild);c[g].length>b.viewNum&&(h=document.createElement("div"),d=document.createElement("button"),h.className="more",d.className="btn-more",d.innerHTML="\u52a0\u8f09\u66f4\u591a",d.addEventListener("click",function(){{var a=c[g];let d=this.parentNode.parentNode,f=d.childNodes.length-1,h=a[0].url.slice(0,-1);d.removeChild(this.parentNode);for(let c=f;c<a.length&&c<f+b.viewNum;c++){let f=a[c].url,e=document.createElement("div"),g=document.createElement("img"),k=document.createElement("span"),
l=document.createElement("span");e.className="photo";g.setAttribute("src",`${b.xmlLink}/${h}/${f}`);g.setAttribute("alt",f);b.imgUrl&&m(g,`${b.imgUrl}/${h}/${f}`,b);k.innerHTML=f.slice(0,-4);l.innerHTML=n(a[c].date);l.title=a[c].date;e.appendChild(g);e.appendChild(k);e.appendChild(l);d.appendChild(e)}a.length>f+b.viewNum&&d.appendChild(this.parentNode)}}),h.appendChild(d),k.appendChild(h))}},p=function(b,c){var a={};try{a=new ActiveXObject("Microsoft.XMLDOM")}catch(e){try{a=document.implementation.createDocument("",
"",null)}catch(h){alert(h.message)}}try{a.async=!1,a.load(c)}catch(e){try{var f=new XMLHttpRequest;f.open("GET",c,!1);f.send(null);a=f.responseXML.documentElement}catch(h){alert(h.message)}}c=a;b.xmlDoc=c;c=b.xmlDoc.querySelectorAll("Key");b=b.xmlDoc.querySelectorAll("LastModified");a=-1;f=0;let d=[];for(let e=0;e<c.length;e++){let h=c[e].innerHTML,g=b[e].innerHTML.slice(0,19).replace(/T/g," "),k=h.indexOf("/");-1!==k&&(k===h.length-1?(d[++a]=[],d[a][0]={url:h,date:g},f=1):d[a][f++]={url:h.slice(k+
1),date:g})}return d},m=function(b,c,a){b.addEventListener("dblclick",function(){let b=document.querySelector(".copy-node");b.value=c;a.TimeoutShow&&clearTimeout(a.TimeoutShow);b.classList.add("show");b.select();try{document.execCommand("copy")}catch(d){console.log("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u64cd\u4f5c\uff01")}console.log("\u590d\u5236\u6210\u529f\uff01");a.TimeoutShow=setTimeout(()=>{b.classList.remove("show")},3E3)})},n=b=>{if(b){var c=new Date(b.replace(/-/g,"/"));
c=Math.floor((new Date-c)/1E3-28800);var a=Math.floor(c/2592E3);if(4<=a)return b.slice(0,-3);if(1<=a)return a+" \u6708\u524d";a=Math.floor(c/604800);if(1<=a)return a+" \u9031\u524d";a=Math.floor(c/86400);if(1<=a)return a+" \u5929\u524d";a=Math.floor(c/3600);if(1<=a)return a+" \u5c0f\u6642\u524d";a=Math.floor(c/60);return 1<=a?a+" \u5206\u9418\u524d":"\u525b\u525b"}};return function(b){this.option=b||{};this.xmlLink=b.xmlLink||"";this.prependTo=b.prependTo||"body";this.viewNum=b.viewNum||4;if(this.imgUrl=
b.imgUrl||"")b=document.createElement("input"),b.className="copy-node",b.setAttribute("readonly","readonly"),document.body.appendChild(b);q(this)}}();