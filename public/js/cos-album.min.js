Cosalbum=function(){var r=function(d,c,a,m){let f=q(d),e=document.createElement("div");c=document.querySelector(c||"body");e.className="cos-album";for(let g=0;g<f.length;g++){let l=document.createElement("div");var b=document.createElement("div"),h=document.createElement("div"),k=f[g][0].url.slice(0,-1);h.innerHTML=k;h.className="title";b.appendChild(h);b.className="cover";b.style.cssText=`background: url(${d}/${k}/\u5c01\u9762.jpg);`;l.appendChild(b);l.className="photoBox";e.appendChild(l);for(b=
1;b<f[g].length&&b<a+1;b++){h=document.createElement("div");let a=document.createElement("img"),c=document.createElement("span"),e=document.createElement("span");h.className="photo";a.setAttribute("src",`${d}/${k}/${f[g][b].url}`);a.setAttribute("alt",f[g][b].url);m&&n(a,`${m}/${k}/${f[g][b].url}`);c.innerHTML=f[g][b].url.slice(0,-4);e.innerHTML=p(f[g][b].date);e.title=f[g][b].date;h.appendChild(a);h.appendChild(c);h.appendChild(e);l.appendChild(h)}c.insertBefore(e,c.firstChild);f[g].length>a&&(k=
document.createElement("div"),b=document.createElement("button"),k.className="more",b.className="btn-more",b.innerHTML="\u52a0\u8f09\u66f4\u591a",b.addEventListener("click",function(){{var b=f[g];let c=this.parentNode.parentNode,e=c.childNodes.length-1,h=b[0].url.slice(0,-1);c.removeChild(this.parentNode);for(let f=e;f<b.length&&f<e+a;f++){let a=b[f].url,e=document.createElement("div"),g=document.createElement("img"),k=document.createElement("span"),l=document.createElement("span");e.className="photo";
g.setAttribute("src",`${d}/${h}/${a}`);g.setAttribute("alt",a);m&&n(g,`${m}/${h}/${a}`);k.innerHTML=a.slice(0,-4);l.innerHTML=p(b[f].date);l.title=b[f].date;e.appendChild(g);e.appendChild(k);e.appendChild(l);c.appendChild(e)}b.length>e+a&&c.appendChild(this.parentNode)}}),k.appendChild(b),l.appendChild(k))}},q=function(d){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM")}catch(e){try{xmlDoc=document.implementation.createDocument("","",null)}catch(b){alert(b.message)}}try{xmlDoc.async=!1,xmlDoc.load(d)}catch(e){try{var c=
new XMLHttpRequest;c.open("GET",d,!1);c.send(null);xmlDoc=c.responseXML.documentElement}catch(b){alert(b.message)}}d=xmlDoc.querySelectorAll("Key");c=xmlDoc.querySelectorAll("LastModified");let a=-1,m=0,f=[];for(let e=0;e<d.length;e++){let b=d[e].innerHTML,h=c[e].innerHTML.slice(0,19).replace(/T/g," "),k=b.indexOf("/");-1!==k&&(k===b.length-1?(f[++a]=[],f[a][0]={url:b,date:h},m=1):f[a][m++]={url:b.slice(k+1),date:h})}return f},n=function(d,c){d.addEventListener("dblclick",function(){let a=document.querySelector(".copy-node");
a.value=c;a.classList.add("show");a.select();try{document.execCommand("copy")}catch(m){console.log("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u64cd\u4f5c\uff01")}console.log("\u590d\u5236\u6210\u529f\uff01");setTimeout(()=>{a.classList.remove("show")},3E3)})},p=d=>{if(d){var c=new Date(d.replace(/-/g,"/"));c=Math.floor((new Date-c)/1E3-28800);var a=Math.floor(c/2592E3);if(4<=a)return d.slice(0,-3);if(1<=a)return a+" \u6708\u524d";a=Math.floor(c/604800);if(1<=a)return a+" \u9031\u524d";
a=Math.floor(c/86400);if(1<=a)return a+" \u5929\u524d";a=Math.floor(c/3600);if(1<=a)return a+" \u5c0f\u6642\u524d";a=Math.floor(c/60);return 1<=a?a+" \u5206\u9418\u524d":"\u525b\u525b"}};return function(d){this.option=d||{};this.xmlLink=d.xmlLink||"";this.prependTo=d.prependTo||"body";this.viewNum=d.viewNum||4;if(this.imgUrl=d.imgUrl||"")d=document.createElement("input"),d.className="copy-node",d.setAttribute("readonly","readonly"),document.body.appendChild(d);r(this.xmlLink,this.prependTo,this.viewNum,
this.imgUrl)}}();