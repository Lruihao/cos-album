Cosalbum=function(){var u=function(b){let c=t(b,b.xmlLink),a=document.createElement("div"),e=document.querySelector(b.prependTo||"body");a.className="cos-album";for(let f=0;f<c.length;f++){c[f]=c[f].reverse();c[f].unshift(c[f].pop());let l=document.createElement("div");var d=document.createElement("div"),h=document.createElement("div"),g=c[f][0].url.slice(0,-1);h.innerHTML=g;h.className="title";d.appendChild(h);d.className="cover";d.style.cssText=`background: url(${b.xmlLink}/${g}/\u5c01\u9762.jpg);`;
l.appendChild(d);l.className="photoBox";a.appendChild(l);for(d=1;d<c[f].length&&d<=b.viewNum;d++){h=c[f][d].url;let a=document.createElement("div"),e=document.createElement("span"),m=document.createElement("span"),k;a.className="photo";let n=h.split(".");if(b.imgType.includes(n[1]))k=document.createElement("img"),k.setAttribute("alt",c[f][d].url);else if(b.videoType.includes(n[1]))k=document.createElement("video"),k.setAttribute("controls","controls");else continue;k.setAttribute("src",`${b.xmlLink}/${g}/${h}`);
b.copyUrl&&p(k,`${b.copyUrl}/${g}/${h}`,b);e.innerHTML=e.title=n[0];m.innerHTML=q(c[f][d].date);m.title=c[f][d].date;a.appendChild(k);a.appendChild(e);a.appendChild(m);l.appendChild(a)}e.insertBefore(a,e.firstChild);c[f].length>b.viewNum&&(g=document.createElement("div"),d=document.createElement("button"),g.className="more",d.className="btn-more",d.innerHTML="\u52a0\u8f09\u66f4\u591a",d.addEventListener("click",function(){{var a=c[f];let e=this.parentNode.parentNode,d=e.childNodes.length-1,g=a[0].url.slice(0,
-1);e.removeChild(this.parentNode);for(let c=d;c<a.length&&c<d+b.viewNum;c++){let d=a[c].url,f=document.createElement("div"),h=document.createElement("span"),l=document.createElement("span"),k;f.className="photo";let m=d.split(".");if(b.imgType.includes(m[1]))k=document.createElement("img"),k.setAttribute("alt",d);else if(b.videoType.includes(m[1]))k=document.createElement("video"),k.setAttribute("controls","controls");else continue;k.setAttribute("src",`${b.xmlLink}/${g}/${d}`);b.copyUrl&&p(k,`${b.copyUrl}/${g}/${d}`,
b);h.innerHTML=h.title=m[0];l.innerHTML=q(a[c].date);l.title=a[c].date;f.appendChild(k);f.appendChild(h);f.appendChild(l);e.appendChild(f)}a.length>d+b.viewNum&&e.appendChild(this.parentNode)}}),g.appendChild(d),l.appendChild(g))}},t=function(b,c){var a={};try{a=new ActiveXObject("Microsoft.XMLDOM")}catch(h){try{a=document.implementation.createDocument("","",null)}catch(g){console.error(g.message)}}try{a.async=!1,a.load(c)}catch(h){try{var e=new XMLHttpRequest;e.open("GET",c,!1);e.send(null);a=e.responseXML.documentElement}catch(g){console.error(g.message)}}c=
a;b.xmlDoc=c;c=b.xmlDoc.querySelectorAll("Key");b=b.xmlDoc.querySelectorAll("LastModified");a=-1;e=0;let d=[];for(let h=0;h<c.length;h++){let g=c[h].innerHTML,f=b[h].innerHTML.slice(0,19).replace(/T/g," "),l=g.indexOf("/");-1!==l&&(l===g.length-1?(d[++a]=[],d[a][0]={url:g,date:f},e=1):d[a][e++]={url:g.slice(l+1),date:f})}return d},p=function(b,c,a){b.addEventListener("dblclick",function(){let b=document.querySelector(".copy-node");b.value=c;a.TimeoutShow&&clearTimeout(a.TimeoutShow);b.classList.add("show");
b.select();try{document.execCommand("copy")}catch(d){console.error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u64cd\u4f5c\uff01")}console.log("\u590d\u5236\u6210\u529f\uff01");a.TimeoutShow=setTimeout(()=>{b.classList.remove("show")},3E3)})},q=b=>{if(b){var c=new Date(b.replace(/-/g,"/"));c=Math.floor((new Date-c)/1E3-28800);var a=Math.floor(c/2592E3);if(4<=a)return b.slice(0,-3);if(1<=a)return a+" \u6708\u524d";a=Math.floor(c/604800);if(1<=a)return a+" \u9031\u524d";a=Math.floor(c/86400);
if(1<=a)return a+" \u5929\u524d";a=Math.floor(c/3600);if(1<=a)return a+" \u5c0f\u6642\u524d";a=Math.floor(c/60);return 1<=a?a+" \u5206\u9418\u524d":"\u525b\u525b"}},r=b=>{if(typeof b!==String&&!Array.isArray(b))return null;if(!Array.isArray(b))return b.split(",")};return function(b){this.version="1.1.6";this.option=b||{};this.xmlLink=this.option.xmlLink||"";this.prependTo=this.option.prependTo||"body";this.viewNum=this.option.viewNum||4;this.copyUrl=this.option.copyUrl||window.location.href;this.imgType=
r(this.option.imgType)||["jpg","jpeg","png","gif","svg"];this.videoType=r(this.option.videoType)||["mp4","mp3","avi","mov","qt"];this.copyUrl&&(b=document.createElement("input"),b.className="copy-node",b.setAttribute("readonly","readonly"),document.body.appendChild(b));u(this);{b=this.version;let c=document.querySelector(".cos-album"),a=document.createElement("div"),e=document.createElement("a");e.href="https://github.com/Lruihao/cos-album";e.target="_blank";e.innerHTML="cos-album";a.className="capower";
a.innerHTML="Powered By ";a.appendChild(e);a.innerHTML+=`<br/>v${b}`;c.appendChild(a)}}}();