Cosalbum=function(){var r=function(c,d,b,m){let f=q(c),e=document.createElement("div");d=document.querySelector(d||"body");e.className="cos-album";for(let g=0;g<f.length;g++){let l=document.createElement("div");var a=document.createElement("div"),h=document.createElement("div"),k=f[g][0].url.slice(0,-1);h.innerHTML=k;h.className="title";a.appendChild(h);a.className="cover";a.style.cssText=`background: url(${c}/${k}/\u5c01\u9762.jpg);`;l.appendChild(a);l.className="photoBox";e.appendChild(l);for(a=
1;a<f[g].length&&a<b+1;a++){h=document.createElement("div");let b=document.createElement("img"),d=document.createElement("span"),e=document.createElement("span");h.className="photo";b.setAttribute("src",`${c}/${k}/${f[g][a].url}`);b.setAttribute("alt",f[g][a].url);m&&n(b,`${m}/${k}/${f[g][a].url}`);d.innerHTML=f[g][a].url.slice(0,-4);e.innerHTML=p(f[g][a].date);e.title=f[g][a].date;h.appendChild(b);h.appendChild(d);h.appendChild(e);l.appendChild(h)}d.insertBefore(e,d.firstChild);f[g].length>b&&(k=
document.createElement("div"),a=document.createElement("button"),k.className="more",a.className="btn-more",a.innerHTML="\u52a0\u8f09\u66f4\u591a",a.addEventListener("click",function(){{var a=f[g];let d=this.parentNode.parentNode,e=d.childNodes.length-1,h=a[0].url.slice(0,-1);d.removeChild(this.parentNode);for(let f=e;f<a.length&&f<e+b;f++){let b=a[f].url,e=document.createElement("div"),g=document.createElement("img"),k=document.createElement("span"),l=document.createElement("span");e.className="photo";
g.setAttribute("src",`${c}/${h}/${b}`);g.setAttribute("alt",b);m&&n(g,`${m}/${h}/${b}`);k.innerHTML=b.slice(0,-4);l.innerHTML=p(a[f].date);l.title=a[f].date;e.appendChild(g);e.appendChild(k);e.appendChild(l);d.appendChild(e)}a.length>e+b&&d.appendChild(this.parentNode)}}),k.appendChild(a),l.appendChild(k))}},q=function(c){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM")}catch(e){try{xmlDoc=document.implementation.createDocument("","",null)}catch(a){alert(a.message)}}try{xmlDoc.async=!1,xmlDoc.load(c)}catch(e){try{var d=
new XMLHttpRequest;d.open("GET",c,!1);d.send(null);xmlDoc=d.responseXML.documentElement}catch(a){alert(a.message)}}c=xmlDoc.querySelectorAll("Key");d=xmlDoc.querySelectorAll("LastModified");let b=-1,m=0,f=[];for(let e=0;e<c.length;e++){let a=c[e].innerHTML,h=d[e].innerHTML.slice(0,19).replace(/T/g," "),k=a.indexOf("/");-1!==k&&(k===a.length-1?(f[++b]=[],f[b][0]={url:a,date:h},m=1):f[b][m++]={url:a.slice(k+1),date:h})}return f},n=function(c,d){c.addEventListener("dblclick",function(){let b=document.querySelector(".copy-node");
b.value=d;b.classList.add("show");b.select();try{document.execCommand("copy")}catch(m){console.log("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u64cd\u4f5c\uff01")}console.log("\u590d\u5236\u6210\u529f\uff01");setTimeout(()=>{b.classList.remove("show")},3E3)})},p=c=>{if(c){var d=new Date(c.replace(/-/g,"/"));d=Math.floor((new Date-d)/1E3);var b=Math.floor(d/86400);if(4<=b)return c.slice(0,-3);if(1<=b)return b+" \u5929\u524d";b=Math.floor(d/3600);if(1<=b)return b+" \u5c0f\u6642\u524d";b=
Math.floor(d/60);return 1<=b?b+" \u5206\u9418\u524d":"\u525b\u525b"}};return function(c){this.option=c||{};this.xmlLink=c.xmlLink||"";this.prependTo=c.prependTo||"body";this.viewNum=c.viewNum||4;if(this.imgUrl=c.imgUrl||"")c=document.createElement("input"),c.className="copy-node",c.setAttribute("readonly","readonly"),document.body.appendChild(c);r(this.xmlLink,this.prependTo,this.viewNum,this.imgUrl)}}();