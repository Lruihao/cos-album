Cosalbum=function(){var q=function(c){let b=p(c,c.xmlLink),a=document.createElement("div"),e=document.querySelector(c.prependTo||"body");a.className="cos-album";for(let f=0;f<b.length;f++){b[f]=b[f].reverse();b[f].unshift(b[f].pop());let k=document.createElement("div");var d=document.createElement("div"),g=document.createElement("div"),h=b[f][0].url.slice(0,-1);g.innerHTML=h;g.className="title";d.appendChild(g);d.className="cover";d.style.cssText=`background: url(${c.xmlLink}/${h}/\u5c01\u9762.jpg);`;
k.appendChild(d);k.className="photoBox";a.appendChild(k);for(d=1;d<b[f].length&&d<=c.viewNum;d++){g=document.createElement("div");let a=document.createElement("img"),e=document.createElement("span"),l=document.createElement("span");g.className="photo";a.setAttribute("src",`${c.xmlLink}/${h}/${b[f][d].url}`);a.setAttribute("alt",b[f][d].url);c.imgUrl&&m(a,`${c.imgUrl}/${h}/${b[f][d].url}`,c);e.innerHTML=b[f][d].url.slice(0,-4);l.innerHTML=n(b[f][d].date);l.title=b[f][d].date;g.appendChild(a);g.appendChild(e);
g.appendChild(l);k.appendChild(g)}e.insertBefore(a,e.firstChild);b[f].length>c.viewNum&&(h=document.createElement("div"),d=document.createElement("button"),h.className="more",d.className="btn-more",d.innerHTML="\u52a0\u8f09\u66f4\u591a",d.addEventListener("click",function(){{var a=b[f];let d=this.parentNode.parentNode,e=d.childNodes.length-1,h=a[0].url.slice(0,-1);d.removeChild(this.parentNode);for(let b=e;b<a.length&&b<e+c.viewNum;b++){let e=a[b].url,f=document.createElement("div"),g=document.createElement("img"),
k=document.createElement("span"),l=document.createElement("span");f.className="photo";g.setAttribute("src",`${c.xmlLink}/${h}/${e}`);g.setAttribute("alt",e);c.imgUrl&&m(g,`${c.imgUrl}/${h}/${e}`,c);k.innerHTML=e.slice(0,-4);l.innerHTML=n(a[b].date);l.title=a[b].date;f.appendChild(g);f.appendChild(k);f.appendChild(l);d.appendChild(f)}a.length>e+c.viewNum&&d.appendChild(this.parentNode)}}),h.appendChild(d),k.appendChild(h))}},p=function(c,b){var a={};try{a=new ActiveXObject("Microsoft.XMLDOM")}catch(g){try{a=
document.implementation.createDocument("","",null)}catch(h){console.error(h.message)}}try{a.async=!1,a.load(b)}catch(g){try{var e=new XMLHttpRequest;e.open("GET",b,!1);e.send(null);a=e.responseXML.documentElement}catch(h){console.error(h.message)}}b=a;c.xmlDoc=b;b=c.xmlDoc.querySelectorAll("Key");c=c.xmlDoc.querySelectorAll("LastModified");a=-1;e=0;let d=[];for(let g=0;g<b.length;g++){let h=b[g].innerHTML,f=c[g].innerHTML.slice(0,19).replace(/T/g," "),k=h.indexOf("/");-1!==k&&(k===h.length-1?(d[++a]=
[],d[a][0]={url:h,date:f},e=1):d[a][e++]={url:h.slice(k+1),date:f})}return d},m=function(c,b,a){c.addEventListener("dblclick",function(){let c=document.querySelector(".copy-node");c.value=b;a.TimeoutShow&&clearTimeout(a.TimeoutShow);c.classList.add("show");c.select();try{document.execCommand("copy")}catch(d){console.error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u64cd\u4f5c\uff01")}console.log("\u590d\u5236\u6210\u529f\uff01");a.TimeoutShow=setTimeout(()=>{c.classList.remove("show")},
3E3)})},n=c=>{if(c){var b=new Date(c.replace(/-/g,"/"));b=Math.floor((new Date-b)/1E3-28800);var a=Math.floor(b/2592E3);if(4<=a)return c.slice(0,-3);if(1<=a)return a+" \u6708\u524d";a=Math.floor(b/604800);if(1<=a)return a+" \u9031\u524d";a=Math.floor(b/86400);if(1<=a)return a+" \u5929\u524d";a=Math.floor(b/3600);if(1<=a)return a+" \u5c0f\u6642\u524d";a=Math.floor(b/60);return 1<=a?a+" \u5206\u9418\u524d":"\u525b\u525b"}};return function(c){this.version="1.1.6";this.option=c||{};this.xmlLink=this.option.xmlLink||
"";this.prependTo=this.option.prependTo||"body";this.viewNum=this.option.viewNum||4;this.imgUrl=this.option.imgUrl||"";this.autoUpload=this.option.autoUpload||"";this.imgUrl&&(c=document.createElement("input"),c.className="copy-node",c.setAttribute("readonly","readonly"),document.body.appendChild(c));q(this);{c=this.version;let b=document.querySelector(".cos-album"),a=document.createElement("div"),e=document.createElement("a");e.href="https://github.com/Lruihao/cos-album";e.target="_blank";e.innerHTML=
"cos-album";a.className="capower";a.innerHTML="Powered By ";a.appendChild(e);a.innerHTML+=`<br/>v${c}`;b.appendChild(a)}}}();