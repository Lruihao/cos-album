Cosalbum=function(){var n=function(f,c,g){let e=m(f),h=document.createElement("div");c=document.querySelector(c||"body");h.className="cos-album";for(let d=0;d<e.length;d++){let l=document.createElement("div");var a=document.createElement("div"),b=document.createElement("div"),k=e[d][0].url.slice(0,-1);b.innerHTML=k;b.className="title";a.appendChild(b);a.className="cover";a.style.cssText=`background: url(${f}/${k}/\u5c01\u9762.jpg);`;l.appendChild(a);l.className="photoBox";h.appendChild(l);for(a=1;a<
e[d].length&&a<g+1;a++){b=document.createElement("div");let c=document.createElement("img"),g=document.createElement("span"),h=document.createElement("span");b.className="photo";c.setAttribute("src",`${f}/${k}/${e[d][a].url}`);c.setAttribute("alt",e[d][a].url);g.innerHTML=e[d][a].url.slice(0,-4);h.innerHTML=e[d][a].date;b.appendChild(c);b.appendChild(g);b.appendChild(h);l.appendChild(b)}c.insertBefore(h,c.firstChild);e[d].length>g&&(k=document.createElement("div"),a=document.createElement("button"),
k.className="more",a.className="btn-more",a.innerHTML="\u52a0\u8f09\u66f4\u591a",a.addEventListener("click",function(){{var a=e[d];let b=this.parentNode.parentNode,c=b.childNodes.length-1,h=a[0].url.slice(0,-1);b.removeChild(this.parentNode);for(let d=c;d<a.length&&d<c+g;d++){let c=a[d].url,e=document.createElement("div"),g=document.createElement("img"),k=document.createElement("span"),l=document.createElement("span");e.className="photo";g.setAttribute("src",`${f}/${h}/${c}`);g.setAttribute("alt",
c);k.innerHTML=c.slice(0,-4);l.innerHTML=a[d].date;e.appendChild(g);e.appendChild(k);e.appendChild(l);b.appendChild(e)}a.length>c+g&&b.appendChild(this.parentNode)}}),k.appendChild(a),l.appendChild(k))}},m=function(f){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM")}catch(a){try{xmlDoc=document.implementation.createDocument("","",null)}catch(b){alert(b.message)}}try{xmlDoc.async=!1,xmlDoc.load(f)}catch(a){try{var c=new XMLHttpRequest;c.open("GET",f,!1);c.send(null);xmlDoc=c.responseXML.documentElement}catch(b){alert(b.message)}}f=
xmlDoc.querySelectorAll("Key");c=xmlDoc.querySelectorAll("LastModified");let g=-1,e=0,h=[];for(let a=0;a<f.length;a++){let b=f[a].innerHTML,k=c[a].innerHTML.slice(0,10),d=b.indexOf("/");-1!==d&&(d===b.length-1?(h[++g]=[],h[g][0]={url:b,date:k},e=1):h[g][e++]={url:b.slice(d+1),date:k})}return h};return function(f){this.option=f||{};this.xmlLink=f.xmlLink||"";this.prependTo=f.prependTo||"body";this.viewNum=f.viewNum||8;n(this.xmlLink,this.prependTo,this.viewNum)}}();